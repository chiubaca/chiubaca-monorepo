---
import { getCollection } from "astro:content";
import type { NoteTypes } from "../common/types";
import BaseLayout from "./BaseLayout.astro";

interface Props {
  path: NoteTypes;
}

const { path } = Astro.props;

const noteCollection = await getCollection(path);

const sortedNoteCollectionByLatestFirst = noteCollection.sort((a, b) =>
  a.data.publish_date > b.data.publish_date ? -1 : 1,
);
---

<BaseLayout title="Fleeting Notes">
  {
    sortedNoteCollectionByLatestFirst.map(async (note) => {
      const { Content } = await note.render();
      return (
        <>
          <h2>
            <a class="link link-hover" href={`${note.collection}/${note.slug}`}>
              {note.slug}
            </a>
          </h2>
          <Content />
        </>
      );
    })
  }
</BaseLayout>
