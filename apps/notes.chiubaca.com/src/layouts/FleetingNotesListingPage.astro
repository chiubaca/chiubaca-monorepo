---
import { getCollection } from "astro:content";
import BaseLayout from "./BaseLayout.astro";

const noteCollection = await getCollection("fleeting-notes");

const sortedNoteCollectionByLatestFirst = noteCollection.sort((a, b) =>
  a.data.publish_date > b.data.publish_date ? -1 : 1,
);
---

<BaseLayout title="Fleeting Notes">
  {
    sortedNoteCollectionByLatestFirst.map(async (note) => {
      const { Content } = await note.render();
      return (
        <>
          <h2>
            <a class="link link-hover" href={`${note.collection}/${note.slug}`}>
              {note.slug}
            </a>
          </h2>
          <Content />
        </>
      );
    })
  }
</BaseLayout>
